2025/04/02 12:00
# 输入系统框架及调试
    分支
        dirver_raspberry_XXXXX_vX.X.X

    文件
        ./modules/app_XXX/app_XXX.c
        ./dirverModules/dirverModules/XXX.c

# 定义
```C


include/uapi/linux/input.h


    struct input_event {
        struct timeval time;
        __u16 type;
        __u16 code;
        __s32 value;
    }

include/uapi/linux/input-event-codes.h

#define EV_SYN			0x00    同步事件，表示 硬件已经上报完所有的数据
#define EV_KEY			0x01    按键事件
```
		0x01

    驱动程序上报的数据含义
        type 类型           EV_KEY  按键事件        EV_ABS  摇杆事件
        code 哪个           KEY_A   哪个按键        ABS_X   摇杆
        value 值            1       按下            0       



cat /proc/bus/input/devices // 查看设备信息, 输入设备信息

// 这个是在驱动力 如何表示一个输入设备的 
I: Bus=0003 Vendor=3151 Product=3020 Version=0200                   id 信息     bus总线 vendor 厂商  product 产品  version 版本
N: Name="YICHIP Wireless Device"                                    名称         YICHIP Wireless Device
P: Phys=usb-3f980000.usb-1.1.3/input0                                物理地址     usb-3f980000.usb-1.1.3/input0     input0 是 设备编号
S: Sysfs=/devices/platform/soc/3f980000.usb/usb1/1-1/1-1.1/1-1.1.3/1-1.1.3:1.0/0003:3151:3020.0001/input/input0  系统文件
U: Uniq=b120300001               唯一标识符
H: Handlers=sysrq kbd leds event0    处理器
B: PROP=0                          属性
B: EV=120013                        事件类型 EV 120013 ； 120013 的 binary 是 0001 0010 0000 0000 0001 0011，
B: KEY=1000000000007 ff9f207ac14057ff febeffdfffefffff fffffffffffffffe
B: MSC=10
B: LED=1f

I: Bus=0003 Vendor=3151 Product=3020 Version=0200
N: Name="YICHIP Wireless Device Mouse"
P: Phys=usb-3f980000.usb-1.1.3/input1
S: Sysfs=/devices/platform/soc/3f980000.usb/usb1/1-1/1-1.1/1-1.1.3/1-1.1.3:1.1/0003:3151:3020.0002/input/input1
U: Uniq=b120300001
H: Handlers=mouse0 event1 
B: PROP=0
B: EV=17
B: KEY=1f0000 0 0 0 0
B: REL=1943
B: MSC=10


 


# 流程
使用
hexdump /dev/input/event0
打印 设备上报的数据

数据中的每一位 代表 一个 类型

如果是 触摸屏事件
图片 XXXX

0x39 是 触摸屏事件
0x35 是 X方向的位移


# 执行顺序


# 内部机制


# Makefile
# # XXXX ---------------------
XXXX-y := $(MODULES_DIR)/XXXX/XXXX.o
obj-m := XXXX.o


# 执行命令


insmod
rmmod

chmod +x main

ps -ef | grep main
kill -9 PID

ls /proc/device-tree/
ls /sys/devices/platform/
dmesg | tail
cat /proc/devices  
cd /sys/class 


hexdump /dev/input/event0       查看设备上报的数据


# 扩展

